{"ast":null,"code":"var _jsxFileName = \"/media/user/13125fdb-ae7d-4997-aceb-5ecc6c3abf3d3/Projects/frontend-20240915T063519Z-001 (copy)/frontend/src/ui.js\",\n  _s = $RefreshSig$();\n// src/PipelineUI.js\nimport React, { useState, useRef, useCallback } from 'react';\nimport ReactFlow, { Controls, Background, MiniMap } from 'reactflow';\nimport { useStore } from './store';\nimport { shallow } from 'zustand/shallow';\nimport { InputNode } from './nodes/inputNode';\nimport { LLMNode } from './nodes/llmNode';\nimport { OutputNode } from './nodes/outputNode';\nimport { TextNode } from './nodes/textNode';\nimport { SubmitButton } from './submit';\nimport 'reactflow/dist/style.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst nodeTypes = {\n  customInput: InputNode,\n  llm: LLMNode,\n  customOutput: OutputNode,\n  text: TextNode\n};\nconst selector = state => ({\n  nodes: state.nodes,\n  edges: state.edges,\n  getNodeID: state.getNodeID,\n  addNode: state.addNode,\n  onNodesChange: state.onNodesChange,\n  onEdgesChange: state.onEdgesChange,\n  onConnect: state.onConnect,\n  updateNodeField: state.updateNodeField // Ensure this is included\n});\n\nexport const PipelineUI = ({\n  darkMode\n}) => {\n  _s();\n  const reactFlowWrapper = useRef(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n  const {\n    nodes,\n    edges,\n    getNodeID,\n    addNode,\n    onNodesChange,\n    onEdgesChange,\n    onConnect,\n    updateNodeField\n  } = useStore(selector, shallow);\n  const getInitNodeData = (nodeID, type) => {\n    return {\n      id: nodeID,\n      nodeType: `${type}`\n    };\n  };\n  const onDrop = useCallback(event => {\n    event.preventDefault();\n    const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n    const appData = event.dataTransfer.getData('application/reactflow');\n    if (appData) {\n      const {\n        nodeType\n      } = JSON.parse(appData);\n      if (!reactFlowInstance) return;\n      const position = reactFlowInstance.project({\n        x: event.clientX - reactFlowBounds.left,\n        y: event.clientY - reactFlowBounds.top\n      });\n      const nodeID = getNodeID(nodeType);\n      const newNode = {\n        id: nodeID,\n        type: nodeType,\n        position,\n        data: getInitNodeData(nodeID, nodeType)\n      };\n      addNode(newNode);\n    }\n  }, [reactFlowInstance, getNodeID, addNode]);\n  const onDragOver = useCallback(event => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n  const onLoad = useCallback(instance => {\n    setReactFlowInstance(instance);\n  }, []);\n  const uiBackgroundColor = darkMode ? '#1b1822' : '#f0f0f0';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pipeline-ui\",\n    ref: reactFlowWrapper,\n    style: {\n      width: '100%',\n      height: '80vh',\n      background: uiBackgroundColor,\n      border: darkMode ? '1px solid #9b30ff' : '1px solid #ddd',\n      borderRadius: 8,\n      boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)'\n    },\n    children: [/*#__PURE__*/_jsxDEV(ReactFlow, {\n      nodes: nodes,\n      edges: edges,\n      nodeTypes: nodeTypes,\n      onNodesChange: onNodesChange,\n      onEdgesChange: onEdgesChange,\n      onConnect: onConnect,\n      onDrop: onDrop,\n      onDragOver: onDragOver,\n      onInit: onLoad,\n      snapGrid: [20, 20],\n      connectionLineType: \"smoothstep\",\n      children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Background, {\n        color: \"#aaa\",\n        gap: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(SubmitButton, {\n      nodes: nodes,\n      edges: edges\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n};\n_s(PipelineUI, \"gNX2x6dpW+okl1NeIVGbRq0vV/g=\", false, function () {\n  return [useStore];\n});\n_c = PipelineUI;\nvar _c;\n$RefreshReg$(_c, \"PipelineUI\");","map":{"version":3,"names":["React","useState","useRef","useCallback","ReactFlow","Controls","Background","MiniMap","useStore","shallow","InputNode","LLMNode","OutputNode","TextNode","SubmitButton","jsxDEV","_jsxDEV","nodeTypes","customInput","llm","customOutput","text","selector","state","nodes","edges","getNodeID","addNode","onNodesChange","onEdgesChange","onConnect","updateNodeField","PipelineUI","darkMode","_s","reactFlowWrapper","reactFlowInstance","setReactFlowInstance","getInitNodeData","nodeID","type","id","nodeType","onDrop","event","preventDefault","reactFlowBounds","current","getBoundingClientRect","appData","dataTransfer","getData","JSON","parse","position","project","x","clientX","left","y","clientY","top","newNode","data","onDragOver","dropEffect","onLoad","instance","uiBackgroundColor","className","ref","style","width","height","background","border","borderRadius","boxShadow","children","onInit","snapGrid","connectionLineType","fileName","_jsxFileName","lineNumber","columnNumber","color","gap","_c","$RefreshReg$"],"sources":["/media/user/13125fdb-ae7d-4997-aceb-5ecc6c3abf3d3/Projects/frontend-20240915T063519Z-001 (copy)/frontend/src/ui.js"],"sourcesContent":["// src/PipelineUI.js\nimport React, { useState, useRef, useCallback } from 'react';\nimport ReactFlow, { Controls, Background, MiniMap } from 'reactflow';\nimport { useStore } from './store';\nimport { shallow } from 'zustand/shallow';\nimport { InputNode } from './nodes/inputNode';\nimport { LLMNode } from './nodes/llmNode';\nimport { OutputNode } from './nodes/outputNode';\nimport { TextNode } from './nodes/textNode';\nimport { SubmitButton } from './submit';\n\nimport 'reactflow/dist/style.css';\n\nconst nodeTypes = {\n  customInput: InputNode,\n  llm: LLMNode,\n  customOutput: OutputNode,\n  text: TextNode,\n};\n\nconst selector = (state) => ({\n  nodes: state.nodes,\n  edges: state.edges,\n  getNodeID: state.getNodeID,\n  addNode: state.addNode,\n  onNodesChange: state.onNodesChange,\n  onEdgesChange: state.onEdgesChange,\n  onConnect: state.onConnect,\n  updateNodeField: state.updateNodeField, // Ensure this is included\n});\n\nexport const PipelineUI = ({ darkMode }) => {\n  const reactFlowWrapper = useRef(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n  const {\n    nodes,\n    edges,\n    getNodeID,\n    addNode,\n    onNodesChange,\n    onEdgesChange,\n    onConnect,\n    updateNodeField,\n  } = useStore(selector, shallow);\n\n  const getInitNodeData = (nodeID, type) => {\n    return { id: nodeID, nodeType: `${type}` };\n  };\n\n  const onDrop = useCallback(\n    (event) => {\n      event.preventDefault();\n      const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n      const appData = event.dataTransfer.getData('application/reactflow');\n\n      if (appData) {\n        const { nodeType } = JSON.parse(appData);\n\n        if (!reactFlowInstance) return;\n\n        const position = reactFlowInstance.project({\n          x: event.clientX - reactFlowBounds.left,\n          y: event.clientY - reactFlowBounds.top,\n        });\n\n        const nodeID = getNodeID(nodeType);\n        const newNode = {\n          id: nodeID,\n          type: nodeType,\n          position,\n          data: getInitNodeData(nodeID, nodeType),\n        };\n\n        addNode(newNode);\n      }\n    },\n    [reactFlowInstance, getNodeID, addNode]\n  );\n\n  const onDragOver = useCallback((event) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  const onLoad = useCallback((instance) => {\n    setReactFlowInstance(instance);\n  }, []);\n\n  const uiBackgroundColor = darkMode ? '#1b1822' : '#f0f0f0';\n\n  return (\n    <div\n      className=\"pipeline-ui\"\n      ref={reactFlowWrapper}\n      style={{\n        width: '100%',\n        height: '80vh',\n        background: uiBackgroundColor,\n        border: darkMode ? '1px solid #9b30ff' : '1px solid #ddd',\n        borderRadius: 8,\n        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)',\n      }}\n    >\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        nodeTypes={nodeTypes}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        onInit={onLoad}\n        snapGrid={[20, 20]}\n        connectionLineType=\"smoothstep\"\n      >\n        <MiniMap />\n        <Controls />\n        <Background color=\"#aaa\" gap={20} />\n      </ReactFlow>\n\n      <SubmitButton nodes={nodes} edges={edges} />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
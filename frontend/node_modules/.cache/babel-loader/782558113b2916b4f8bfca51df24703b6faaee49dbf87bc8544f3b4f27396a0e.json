{"ast":null,"code":"import _slicedToArray from\"/media/user/13125fdb-ae7d-4997-aceb-5ecc6c3abf3d3/Projects/Prashant_Kumar_technical_assessment/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// src/PipelineUI.js\nimport React,{useState,useRef,useCallback}from'react';import ReactFlow,{Controls,Background,MiniMap}from'reactflow';import{useStore}from'./store';import{shallow}from'zustand/shallow';import{InputNode}from'./nodes/inputNode';import{LLMNode}from'./nodes/llmNode';import{OutputNode}from'./nodes/outputNode';import{TextNode}from'./nodes/textNode';import{SubmitButton}from'./submit';import'reactflow/dist/style.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var nodeTypes={customInput:InputNode,llm:LLMNode,customOutput:OutputNode,text:TextNode};var selector=function selector(state){return{nodes:state.nodes,edges:state.edges,getNodeID:state.getNodeID,addNode:state.addNode,onNodesChange:state.onNodesChange,onEdgesChange:state.onEdgesChange,onConnect:state.onConnect,updateNodeField:state.updateNodeField// Ensure this is included\n};};export var PipelineUI=function PipelineUI(_ref){var darkMode=_ref.darkMode;var reactFlowWrapper=useRef(null);var _useState=useState(null),_useState2=_slicedToArray(_useState,2),reactFlowInstance=_useState2[0],setReactFlowInstance=_useState2[1];var _useStore=useStore(selector,shallow),nodes=_useStore.nodes,edges=_useStore.edges,getNodeID=_useStore.getNodeID,addNode=_useStore.addNode,onNodesChange=_useStore.onNodesChange,onEdgesChange=_useStore.onEdgesChange,onConnect=_useStore.onConnect,updateNodeField=_useStore.updateNodeField;var getInitNodeData=function getInitNodeData(nodeID,type){return{id:nodeID,nodeType:\"\".concat(type)};};var onDrop=useCallback(function(event){event.preventDefault();var reactFlowBounds=reactFlowWrapper.current.getBoundingClientRect();var appData=event.dataTransfer.getData('application/reactflow');if(appData){var _JSON$parse=JSON.parse(appData),nodeType=_JSON$parse.nodeType;if(!reactFlowInstance)return;var position=reactFlowInstance.project({x:event.clientX-reactFlowBounds.left,y:event.clientY-reactFlowBounds.top});var nodeID=getNodeID(nodeType);var newNode={id:nodeID,type:nodeType,position:position,data:getInitNodeData(nodeID,nodeType)};addNode(newNode);}},[reactFlowInstance,getNodeID,addNode]);var onDragOver=useCallback(function(event){event.preventDefault();event.dataTransfer.dropEffect='move';},[]);var onLoad=useCallback(function(instance){setReactFlowInstance(instance);},[]);var uiBackgroundColor=darkMode?'#1b1822':'#f0f0f0';return/*#__PURE__*/_jsxs(\"div\",{className:\"pipeline-ui\",ref:reactFlowWrapper,style:{width:'100%',height:'80vh',background:uiBackgroundColor,border:darkMode?'1px solid #9b30ff':'1px solid #ddd',borderRadius:8,boxShadow:'0 2px 8px rgba(0, 0, 0, 0.2)'},children:[/*#__PURE__*/_jsxs(ReactFlow,{nodes:nodes,edges:edges,nodeTypes:nodeTypes,onNodesChange:onNodesChange,onEdgesChange:onEdgesChange,onConnect:onConnect,onDrop:onDrop,onDragOver:onDragOver,onInit:onLoad,snapGrid:[20,20],connectionLineType:\"smoothstep\",children:[/*#__PURE__*/_jsx(MiniMap,{}),/*#__PURE__*/_jsx(Controls,{}),/*#__PURE__*/_jsx(Background,{color:\"#aaa\",gap:20})]}),/*#__PURE__*/_jsx(SubmitButton,{nodes:nodes,edges:edges})]});};","map":{"version":3,"names":["React","useState","useRef","useCallback","ReactFlow","Controls","Background","MiniMap","useStore","shallow","InputNode","LLMNode","OutputNode","TextNode","SubmitButton","jsx","_jsx","jsxs","_jsxs","nodeTypes","customInput","llm","customOutput","text","selector","state","nodes","edges","getNodeID","addNode","onNodesChange","onEdgesChange","onConnect","updateNodeField","PipelineUI","_ref","darkMode","reactFlowWrapper","_useState","_useState2","_slicedToArray","reactFlowInstance","setReactFlowInstance","_useStore","getInitNodeData","nodeID","type","id","nodeType","concat","onDrop","event","preventDefault","reactFlowBounds","current","getBoundingClientRect","appData","dataTransfer","getData","_JSON$parse","JSON","parse","position","project","x","clientX","left","y","clientY","top","newNode","data","onDragOver","dropEffect","onLoad","instance","uiBackgroundColor","className","ref","style","width","height","background","border","borderRadius","boxShadow","children","onInit","snapGrid","connectionLineType","color","gap"],"sources":["/media/user/13125fdb-ae7d-4997-aceb-5ecc6c3abf3d3/Projects/Prashant_Kumar_technical_assessment/frontend/src/ui.js"],"sourcesContent":["// src/PipelineUI.js\nimport React, { useState, useRef, useCallback } from 'react';\nimport ReactFlow, { Controls, Background, MiniMap } from 'reactflow';\nimport { useStore } from './store';\nimport { shallow } from 'zustand/shallow';\nimport { InputNode } from './nodes/inputNode';\nimport { LLMNode } from './nodes/llmNode';\nimport { OutputNode } from './nodes/outputNode';\nimport { TextNode } from './nodes/textNode';\nimport { SubmitButton } from './submit';\n\nimport 'reactflow/dist/style.css';\n\nconst nodeTypes = {\n  customInput: InputNode,\n  llm: LLMNode,\n  customOutput: OutputNode,\n  text: TextNode,\n};\n\nconst selector = (state) => ({\n  nodes: state.nodes,\n  edges: state.edges,\n  getNodeID: state.getNodeID,\n  addNode: state.addNode,\n  onNodesChange: state.onNodesChange,\n  onEdgesChange: state.onEdgesChange,\n  onConnect: state.onConnect,\n  updateNodeField: state.updateNodeField, // Ensure this is included\n});\n\nexport const PipelineUI = ({ darkMode }) => {\n  const reactFlowWrapper = useRef(null);\n  const [reactFlowInstance, setReactFlowInstance] = useState(null);\n  const {\n    nodes,\n    edges,\n    getNodeID,\n    addNode,\n    onNodesChange,\n    onEdgesChange,\n    onConnect,\n    updateNodeField,\n  } = useStore(selector, shallow);\n\n  const getInitNodeData = (nodeID, type) => {\n    return { id: nodeID, nodeType: `${type}` };\n  };\n\n  const onDrop = useCallback(\n    (event) => {\n      event.preventDefault();\n      const reactFlowBounds = reactFlowWrapper.current.getBoundingClientRect();\n      const appData = event.dataTransfer.getData('application/reactflow');\n\n      if (appData) {\n        const { nodeType } = JSON.parse(appData);\n\n        if (!reactFlowInstance) return;\n\n        const position = reactFlowInstance.project({\n          x: event.clientX - reactFlowBounds.left,\n          y: event.clientY - reactFlowBounds.top,\n        });\n\n        const nodeID = getNodeID(nodeType);\n        const newNode = {\n          id: nodeID,\n          type: nodeType,\n          position,\n          data: getInitNodeData(nodeID, nodeType),\n        };\n\n        addNode(newNode);\n      }\n    },\n    [reactFlowInstance, getNodeID, addNode]\n  );\n\n  const onDragOver = useCallback((event) => {\n    event.preventDefault();\n    event.dataTransfer.dropEffect = 'move';\n  }, []);\n\n  const onLoad = useCallback((instance) => {\n    setReactFlowInstance(instance);\n  }, []);\n\n  const uiBackgroundColor = darkMode ? '#1b1822' : '#f0f0f0';\n\n  return (\n    <div\n      className=\"pipeline-ui\"\n      ref={reactFlowWrapper}\n      style={{\n        width: '100%',\n        height: '80vh',\n        background: uiBackgroundColor,\n        border: darkMode ? '1px solid #9b30ff' : '1px solid #ddd',\n        borderRadius: 8,\n        boxShadow: '0 2px 8px rgba(0, 0, 0, 0.2)',\n      }}\n    >\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        nodeTypes={nodeTypes}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onConnect={onConnect}\n        onDrop={onDrop}\n        onDragOver={onDragOver}\n        onInit={onLoad}\n        snapGrid={[20, 20]}\n        connectionLineType=\"smoothstep\"\n      >\n        <MiniMap />\n        <Controls />\n        <Background color=\"#aaa\" gap={20} />\n      </ReactFlow>\n\n      <SubmitButton nodes={nodes} edges={edges} />\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}